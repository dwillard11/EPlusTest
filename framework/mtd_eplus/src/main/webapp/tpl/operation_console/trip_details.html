<div class="wrapper-md" ng-controller="tripdetailsctrl" dw-loading="sample-1"
     dw-loading-options="{active: true,spinner: false}">
    <div class="bg-light lter b-b wrapper-md">
        <div class="row">
            <div class="col-sm-6 col-xs-12">
                <h1 class="m-n font-thin h3">Operations Console â€“ Trips</h1>
            </div>
        </div>
    </div>
    <script type="text/ng-template" id="beforeSaveTrip.html">
        <div ng-include="'tpl/operation_console/before_save_trip.html'"></div>
    </script>

    <div class="panel panel-default">
        <div class="row wrapper">
            <div class="col-lg-4">
                <label class="col-sm-4 control-label text-left" translate="Trip#" style="padding-top:10px;">Trip#</label>
                <div class="col-sm-8">
                    <p class="form-control-static" style="font-size:18px; font-weight:bold;">{{trip.tripRefNo}}</p>
                </div>
            </div>

            <div class="col-lg-4">
                <label class="col-sm-4 control-label text-left" translate="Quote #" style="padding-top:10px;">Quote #</label>
                <div class="col-sm-8">
                    <p class="form-control-static" style="font-size:18px; font-weight:bold;">{{trip.quoteRefNo}}</p>
                </div>
            </div>
            <div class="col-lg-4">
                <label  class="col-sm-4 control-label" translate="Division" style="padding-top:10px;">Division:</label>
                <div class="col-sm-8">
                    <select name="tripDept" id="tripDept" class="form-control" name="ddlTripDept"
                            ng-options="Option3.id as Option3.name for Option3 in departmentOptions"
                            ng-model="trip.departmentId" ng-disabled="true">
                    </select>
                </div>
            </div>
        </div>
        <div class="panel-body min-content">
            <tabset justified="true" class="tab-container">
                <tab heading="Trip Editor" class="font-bold">
                    <div class="row wrapper" dw-loading="sample-1"
                         dw-loading-options="{active: true,spinner: false}">
                        <div class="col-lg-6">
                            <label class="col-sm-3 control-label text-left">Trip Type</label>
                            <div class="col-sm-9">
                                <select name="quoteType" id="quoteType" class="form-control" name="ddlQuoteType"
                                        ng-options="Option.id as Option.name for Option in quoteTypeOption"
                                        ng-model="trip.type" ng-disabled="!activeSaveButton">
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <label class="col-sm-4 control-label text-left">Trip Status</label>
                            <div class="col-sm-8">
                                <select name="tripStatus" class="form-control"
                                        ng-options="Option2.id as Option2.name for Option2 in tripStatusOption"
                                        ng-change="changeTripStatus()"
                                        ng-model="trip.status" ng-disabled="!activeSaveButton">
                                </select>
                            </div>
                        </div>

                        <div class="col-lg-3">
                            <label class="col-sm-4 control-label text-left">Authorized By</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" ng-model="trip.authorizedBy"
                                       ng-disabled="!activeSaveButton">
                            </div>
                        </div>

                        <p class="col-lg-12"></p>
                        <div class="col-lg-6">
                            <label class="col-sm-3 control-label text-left">PO#/Auth#</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" ng-model="trip.authorizationNo"
                                       ng-disabled="!activeSaveButton">
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label class="col-sm-4 control-label text-left">Ready Time</label>
                                <div class="col-sm-8">
                                    <div class="dropdown">
                                        <a class="dropdown-toggle" id="dropdownRadyTime" role="button"
                                           data-toggle="dropdown" data-target="#">
                                            <div class="input-group"><input type="text" class="form-control"
                                                                            ng-model="trip.readyTime"
                                                                            ng-disabled="!activeSaveButton"
                                                                            id="readyTime"><span
                                                    class="input-group-addon"><i
                                                    class="glyphicon glyphicon-calendar"></i></span>
                                            </div>
                                        </a>
                                        <ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dLabel">
                                            <datetimepicker data-ng-model="trip.readyTime"
                                                            ng-disabled="!activeSaveButton"
                                                            data-datetimepicker-config="{ dropdownSelector: '#dropdownRadyTime',modelType: 'YYYY-MM-DD HH:mm'}"/>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <label class="col-sm-4 control-label text-left">Pickup Date</label>
                            <div class="col-sm-8">
                                <div class="input-group" ng-controller="DatepickerDemoCtrl">
                                    <input type="text" class="form-control"
                                           datepicker-popup="yyyy-MM-dd"
                                           ng-model="trip.pickupDate" id="pickupDate"
                                           ng-disabled="!activeSaveButton"
                                           is-open="opened" datepicker-options="dateOptions"
                                           ng-required="false" close-text="Close"/>
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default"
                                                ng-click="open($event)">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
								    </span>
                                </div>
                            </div>
                        </div>

                        <p class="col-lg-12"></p>
                        <div class="col-lg-6">
                            <label class="col-sm-3 control-label text-left">Critical Notes</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" ng-model="trip.note" ui-focus="focusNotes"
                                       ng-disabled="!activeSaveButton">
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <label class="col-sm-4 control-label text-left">Critical Time</label>
                            <div class="col-sm-8">
                                <div class="dropdown">
                                    <a class="dropdown-toggle" id="dropdown5" role="button"
                                       data-toggle="dropdown" data-target="#">
                                        <div class="input-group"><input type="text" class="form-control"
                                                                        ng-model="trip.criticalTime"
                                                                        ng-disabled="!activeSaveButton"
                                                                        id="criticalTime"><span
                                                class="input-group-addon"><i
                                                class="glyphicon glyphicon-calendar"></i></span>
                                        </div>
                                    </a>
                                    <ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dLabel">
                                        <datetimepicker data-ng-model="trip.criticalTime"
                                                        ng-disabled="!activeSaveButton"
                                                        data-datetimepicker-config="{ dropdownSelector: '#dropdown5',modelType: 'YYYY-MM-DD HH:mm'}"/>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <label class="col-sm-4 control-label text-left">Delivery date</label>
                            <div class="col-sm-8">
                                <div class="input-group" ng-controller="DatepickerDemoCtrl">
                                    <input type="text" class="form-control"
                                           datepicker-popup="yyyy-MM-dd"
                                           ng-model="trip.deliveryDate" id="deliveryDate"
                                           ng-disabled="!activeSaveButton"
                                           is-open="opened" datepicker-options="dateOptions"
                                           ng-required="false" close-text="Close"/>
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default"
                                                ng-click="open($event)">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row min-row">
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold" translate="Client">Client</div>
                                <div class="panel-body">
                                    <form class="form-horizontal" method="post">
                                        <div class="hidden form-group">
                                            <div class="col-sm-11">
                                                <input class="form-control" type="text"
                                                       ng-model="client.id" disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <ui-select ng-model="client.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(client.selected,'client')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients "
                                                                           refresh="searchLocation($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'client');"
                                                                 class="btn btn-default"
                                                                 ng-disabled="!activeSaveButton">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           ng-model="client.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(client)"
                                                                ng-disabled="!client || !client.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="client.address1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="client.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="client.city"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="client.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="client.country"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">

                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="client.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="client.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold" >
                                    <label translate="Shipper">Shipper</label>
                                    <button class="btn btn-sm btn-info pull-right text-right" ng-disabled="!activeSaveButton || shipper.id == '' || shipper.id == null " ng-click="copyToClient('shipper')"
                                            tooltip-placement="bottom"
                                            tooltip="Copy To Client">
                                        <i class="fa fa-copy"></i>
                                    </button>
                                </div>
                                <div class="panel-body">
                                    <form class="form-horizontal" method="post">
                                        <div class="hidden form-group">
                                            <div class="col-sm-11">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.id" disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <ui-select ng-model="shipper.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(shipper.selected,'shipper')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients "
                                                                           refresh="searchLocation($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'shipper');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           ng-model="shipper.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(shipper)"
                                                                ng-disabled="!shipper || !shipper.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.address1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.city"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.country"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">

                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="shipper.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Drop Shipper</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" ng-disabled="!activeSaveButton"
                                                       ng-model="trip.dropShipperName" value="{{trip.dropShipperName}}">
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold" >
                                    <label translate="Consignee">Consignee</label>
                                    <button class="btn btn-sm btn-info pull-right text-right"
                                            ng-disabled="!activeSaveButton || consignee.id == '' || consignee.id == null "
                                            ng-click="copyToClient('consignee')"
                                            tooltip="Copy To Client">
                                        <i class="fa fa-copy"></i>
                                    </button>
                                </div>
                                <div class="panel-body">
                                    <form class="form-horizontal" role="form">
                                        <div class="hidden form-group">
                                            <div class="col-sm-9">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.id"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <ui-select ng-model="consignee.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(consignee.selected,'consignee')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients"
                                                                           refresh="searchLocation($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'consignee');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           ng-model="consignee.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(consignee)"
                                                                ng-disabled="!consignee || !consignee.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.address1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" ng-model="consignee.city"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.country"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="consignee.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Drop Consignee</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="trip.dropCosigneeName" ng-disabled="!activeSaveButton"
                                                       value="{{trip.dropCosigneeName}}">
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12">

                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="!activeSaveButton">Back
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="activeSaveButton"
                                        translate="Cancel">Cancel
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('exit')"
                                        ng-show="activeSaveButton">
                                    Save and Exit
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('keep')"
                                        ng-show="activeSaveButton">
                                    Save
                                </button>
                            </div>

                        </div>

                    </div>

                </tab >
                <tab heading="Events" active="activityEvent" class="font-bold" ng-click="loadTripEvents(tripid, 0, true)">
                    <div class="row" dw-loading="sample-2"
                         dw-loading-options="{active: false,spinner: false}">
                        <div class="col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold" translate="Freight List">Freight List</div>
                                <div class="row wrapper">
                                    <div class="col-sm-4 m-b-xs">
                                    </div>
                                    <div class="col-sm-2 m-b-xs">

                                    </div>
                                    <div class="col-sm-6 m-b-xs">

                                        <div class="btn-group dropdown pull-right m-t-xs">
                                            <button class="btn btn-default" data-toggle="dropdown" translate="Export">
                                                Export
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a ng-click="exportpdf(freightList,'freight')">PDF</a></li>
                                                <li><a ng-csv="exportcsv(freightList,'freight')"
                                                       filename="{{csvfilename}}">CSV</a></li>
                                            </ul>
                                        </div>

                                        <div class="btn-group  pull-right m-t-xs">
                                            <script type="text/ng-template" id="tripFreight.html">
                                                <div ng-include="'tpl/operation_console/trip_freight_form.html'"></div>
                                            </script>
                                            <button class="btn btn-success" ng-show="activeSaveButton"
                                                    ng-click="handleFreight(tripid, '', 'add',systemOfMeasure)"
                                                    translate="Add Item">Add Item
                                            </button>
                                        </div>
                                        <div class="input-group pull-right m-t-xs">

                                            <label class="col-sm-3 control-label m-t-xs text-right">UOM</label>
                                            <div class="col-sm-8">
                                                <select class="form-control" ng-disabled="!activeSaveButton"
                                                        style="width: 120px"
                                                        ng-options="Option.id as Option.name for Option in measureOption"
                                                        ng-model="systemOfMeasure" required="required"
                                                        ng-change="changeMeasure(tripid, systemOfMeasure)">
                                                </select>
                                            </div>


                                        </div>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped" st-table="displayFreights"
                                           st-safe-src="freightList">
                                        <thead>
                                        <tr>
                                            <th class="hidden" st-sort="id">id</th>
                                            <th st-sort="item">Desc goods</th>
                                            <th style="display: none" st-sort="description">Desc</th>
                                            <th st-sort="actualDimension">Act Dim</th>
                                            <th st-sort="actualWeight">Act Weight</th>
                                            <th st-sort="bagtag">Bag Tag</th>
                                            <th st-sort="actualCost">Act Value</th>
                                            <th st-sort="usdCost">USD Value</th>
                                            <th st-sort="usdRate">USD rate</th>
                                            <th style="width: 60px; text-align: center">Action</th>
                                        </tr>
                                        </thead>
                                        <tbody ng-show="!isLoading">
                                        <tr ng-repeat="row in displayFreights">
                                            <td class="hidden">{{row.id}}</td>
                                            <td>{{row.item}}</td>
                                            <td  style="display: none" >{{row.description}}</td>
                                            <td>{{row.actualDimension }}</td>
                                            <td>{{row.actualWeight | number:2}}</td>
                                            <td>{{row.bagtag}}</td>
                                            <td>{{row.actualCurrency }} {{row.actualCost | currency:'':2}}</td>
                                            <td>USD {{row.usdCost | currency:'':2}}</td>
                                            <td>{{row.usdRate | number:2}}</td>
                                            <td style="white-space: nowrap">
                                                <div class="buttons">
                                                    <button class="btn btn-sm btn-info" ng-show="activeSaveButton"
                                                            ng-click="handleFreight(tripid, row, 'edit',systemOfMeasure)"
                                                            tooltip-placement="bottom"
                                                            tooltip="Edit"><i
                                                            class="fa fa-edit"></i></button>
                                                    <button class="btn btn-sm btn-danger" ng-show="activeSaveButton"
                                                            ng-click="removeFreight(row)"
                                                            tooltip-placement="bottom"
                                                            tooltip="Delete"><i
                                                            class="fa fa-times"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody ng-show="isLoading">
                                        <tr>
                                            <td colspan="10" class="text-center"><i
                                                    class="fa fa-spin fa-refresh"></i></td>
                                        </tr>
                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <td>
                                                Freight Summary:{{freightSummary}}
                                            </td>

                                            <td>

                                            </td>

                                            <td>
                                                Total Pieces:{{totalPieces}}
                                            </td>

                                            <td>

                                            </td>

                                            <td>
                                                Total Chargeable Weight({{systemOfMeasure=="M"?"KG":"LBS"}}): {{getTotalChargeableWeight(freightList,(systemOfMeasure=="M"?"CM":"Inches"))}}
                                            </td>

                                            <td colspan="6">

                                            </td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <button class="btn btn-sm btn-success" ng-click="addTripEvent()"
                                            ng-show="activeSaveButton"><i
                                            class="glyphicon glyphicon-plus"></i> Add
                                    </button>
                                    <button class="btn btn-sm btn-danger" ng-click="removeTripEvent()"
                                            ng-show="activeSaveButton"><i
                                            class="glyphicon glyphicon-minus"></i> Remove
                                    </button>
                                    <button class="btn btn-sm btn-default" ng-click="markComplete(1)"
                                            ng-show="activeSaveButton">Mark Complete
                                    </button>
                                    <button class="btn btn-sm btn-default" ng-click="markComplete(0)"
                                            ng-show="activeSaveButton">Un-Complete
                                    </button>
                                    <button class="btn btn-sm btn-default"
                                            ng-click="loadEventTemplateByQuoteType(trip.type)"
                                            ng-show="activeSaveButton">
                                        Import Event Template
                                    </button>
                                    <button class="btn btn-sm btn-default" ng-click="showTripEventSubject()"
                                            ng-show="activeSaveButton">Notify
                                    </button>

                                    <div class="btn-group">
                                        <button type="button" class="btn btn-sm btn-default"
                                                ng-click="switchTo('grid')">Grid View
                                        </button>
                                        <button type="button" class="btn btn-sm btn-default"
                                                ng-click="switchTo('tree')">Tree View
                                        </button>
                                    </div>
                                    <div class="pull-right text-right">
                                        <button class="btn btn-sm btn-default" type="button"
                                                ng-click="showDetail()" ng-show="!showEditEventButton"> Show Detail
                                        </button>
                                        <button class="btn btn-sm btn-default" type="button"
                                                ng-click="hideDetail()" ng-show="showEditEventButton"> Hide Detail
                                        </button>
                                        <button class="btn btn-sm btn-success" type="button"
                                                ng-click="submitTripEvents(eventForm.$valid,'keep')"
                                                ng-show="activeSaveButton && showEditEventButton">Save
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="{{panelStyle}}">
                            <div class="panel panel-default" ng-show="showTree">
                                <div class="panel-heading font-bold"></div>
                                <div class="panel-body">
                                    <div class="form-horizontal">
                                        <div>
                                            <ul id="dataTree" class="ztree"
                                                style="height: 900px; overflow:auto;"></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="panel panel-default" ng-show="showGrid">
                                <div class="panel-heading font-bold">Event, Milestones and Tasks</div>
                                <div class="row wrapper">
                                    <div class="col-sm-6">
                                        <div class="input-group  pull-right">
                                            <input type="text" class="input form-control"
                                                   ng-model="advsearchfilter"  ng-keyup="unselectAllEvents()">
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="advsearch2()"
                                                        translate="Search" style="width: 80px">Search</button>
					                        </span>
                                        </div>
                                    </div>
                                    <div class="col-sm-6">
                                        <div class="input-group  pull-right">
                                            <button class="btn btn-default" data-toggle="dropdown" translate="Export">
                                                Export
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a ng-click="exportpdf(displayCollection,'event')">PDF</a></li>
                                                <li><a ng-csv="exportcsv(displayCollection,'event')" filename="{{csvfilename}}">CSV</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="table-responsive" style="height: 900px; overflow:auto;">
                                    <table class="table table-striped" search-event-model="advsearchfilter" st-table="displayCollection"
                                           st-safe-src="eventTree">
                                        <thead>
                                        <tr>
                                            <th><input type="checkbox" ng-click="selectAllEvents()" id="checkAllRecords" ng-show="activeSaveButton"></th>
                                            <th class="hidden" st-sort="id">id</th>
                                            <th st-sort="">Leg</th>
                                            <th st-sort="">Class</th>
                                            <th st-sort="">Item</th>
                                            <th st-sort="">Est/Act Date</th>
                                            <th st-sort="">Status</th>
                                            <th st-sort="">Entity</th>
                                            <th st-sort="">Contact</th>
                                            <th st-sort="">Notify</th>
                                            <th st-sort="">Notes</th>
                                            <th st-sort="">Total Costs</th>
                                        </tr>
                                        </thead>
                                        <tbody ng-show="!isLoadingTripEvent" id="eventList">
                                        <tr ng-repeat="row in displayCollection">
                                            <td><input type="checkbox" ng-model="row.hasChecked" class="hasChecked" data-id="{{row.id}}" ng-show="activeSaveButton"></td>
                                            <td class="hidden">{{row.id}}</td>
                                            <td>{{row.category}}</td>
                                            <td>{{row.eventClassDesc}}</td>
                                            <td>
                                                <a href class="text-info" ng-click="getTripEventDetails(row.id, true)">{{row.item}}</a>
                                            </td>
                                            <td>{{row.estimatedDate | date:'yyyy-MM-dd HH:mm:ss'}} / {{row.actualDate|
                                                date:'yyyy-MM-dd HH:mm:ss'}}
                                            </td>
                                            <td>
                                                <input type="checkbox" ng-checked="row.markedComplete == 1"
                                                       ng-if="row.eventClass == 'T'" ng-disabled=true>
                                                <input type="radio" ng-checked="row.markedComplete == 1"
                                                       ng-if="row.eventClass=='M'" ng-disabled=true>
                                            </td>
                                            <td>{{row.linkedEntityName }}</td>
                                            <td>{{row.contactName }}</td>
                                            <td>{{row.jointNotify}}</td>
                                            <td>{{row.description}}</td>
                                            <td>
                                                {{row.totalCosts | currency:'USD':2}}
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody ng-show="isLoadingTripEvent">
                                        <tr>
                                            <td colspan="11" class="text-center"><i
                                                    class="fa fa-spin fa-refresh"></i></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-5" ng-show="showEditEventButton">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">
                                    Detail
                                </div>
                                <div class="panel-body">
                                    <form class="form-horizontal" name="eventForm" method="POST"
                                          ng-submit="submitTripEvents(eventForm.$valid,'keep')">
                                        <input type="text" ng-model="event.id" style="display: none;"/>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Class</label>
                                            <div class="col-sm-4">
                                                <select id="eventClass" class="form-control"
                                                        name="ddlEventClass"
                                                        ng-disabled="!activeSaveButton"
                                                        ng-options="Option.id as Option.name for Option in eventClassOption"
                                                        ng-model="event.eventClass" required>
                                                </select>
                                            </div>
                                            <label class="col-sm-2 control-label"></label>
                                            <div class="col-sm-4">

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Event Code</label>
                                            <div class="col-sm-4">
                                                <select name="code" id="code" class="form-control" name="ddlEventCode"
                                                        ng-options="Option.id as Option.name for Option in eventCodeOption"
                                                        ng-disabled="!activeSaveButton"
                                                        ng-model="event.code">
                                                </select>
                                            </div>
                                            <label class="col-sm-2 control-label">Customer Notify</label>
                                            <div class="col-sm-4">
                                                <select class="form-control" name="ddlNotify"
                                                        ng-options="Option.id as Option.name for Option in yesNoOption"
                                                        ng-disabled="!activeSaveButton"
                                                        ng-model="event.customerNotify" required="required">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Category</label>
                                            <div class="col-sm-10">
                                                <input type="text" name="txtCategory" class="form-control"
                                                       ng-model="event.category" placeholder="" required="required"
                                                       ng-disabled="!activeSaveButton"
                                                       maxlength="50"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Item</label>
                                            <div class="col-sm-10">
                                                <input type="text" name="txtItem" class="form-control"
                                                       ng-model="event.item" placeholder="" required="required"
                                                       ng-disabled="!activeSaveButton"
                                                       maxlength="50"/>
                                            </div>
                                        </div>
                                        <div class="form-group"
                                             ng-show="false"> <!-- ng-show="event.category.trim().toUpperCase() == 'DELIVERY' && event.code.trim().toUpperCase() == 'POD'"> -->
                                            <label class="col-sm-2 control-label">POD Name</label>
                                            <div class="col-sm-4">
                                                <input type="text" name="txtPODName" class="form-control"
                                                       ng-disabled="!activeSaveButton"
                                                       ng-model="event.podName" placeholder=""/>
                                            </div>
                                            <label class="col-sm-2 control-label hidden">POD Date</label>
                                            <div class="col-sm-4 hidden">
                                                <div class="dropdown" ng-disabled="!activeSaveButton">
                                                    <a class="dropdown-toggle" id="dropdown30" role="button"
                                                       data-toggle="dropdown" data-target="#">
                                                        <div class="input-group"><input type="text" class="form-control"
                                                                                        ng-disabled="!activeSaveButton"
                                                                                        ng-model="event.podDate"
                                                                                        id="podDate"><span
                                                                class="input-group-addon"><i
                                                                class="glyphicon glyphicon-calendar"></i></span>
                                                        </div>
                                                    </a>
                                                    <ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dLabel"
                                                        ng-disabled="!activeSaveButton">
                                                        <datetimepicker data-ng-model="event.podDate"
                                                                        data-datetimepicker-config="{ dropdownSelector: '#dropdown30',modelType: 'YYYY-MM-DD HH:mm'}"/>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Est. Date</label>
                                            <div class="col-sm-4">
                                                <div class="dropdown" ng-disabled="!activeSaveButton">
                                                    <a class="dropdown-toggle" id="dropdown2" role="button"
                                                       ng-disabled="!activeSaveButton"
                                                       data-toggle="dropdown" data-target="#">
                                                        <div class="input-group"><input type="text" class="form-control"
                                                                                        ng-disabled="!activeSaveButton"
                                                                                        ng-model="event.estimatedDate"
                                                                                        id="estimatedDate"><span
                                                                class="input-group-addon"><i
                                                                class="glyphicon glyphicon-calendar"></i></span>
                                                        </div>
                                                    </a>
                                                    <ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dLabel">
                                                        <datetimepicker data-ng-model="event.estimatedDate"
                                                                        ng-disabled="!activeSaveButton"
                                                                        data-datetimepicker-config="{ dropdownSelector: '#dropdown2',modelType: 'YYYY-MM-DD HH:mm'}"/>
                                                    </ul>
                                                </div>
                                            </div>
                                            <label class="col-sm-2 control-label">Act. Date</label>
                                            <div class="col-sm-4">
                                                <div class="dropdown" ng-disabled="!activeSaveButton">
                                                    <a class="dropdown-toggle" id="dropdown3" role="button"
                                                       data-toggle="dropdown" data-target="#">
                                                        <div class="input-group"><input type="text" class="form-control"
                                                                                        ng-disabled="!activeSaveButton"
                                                                                        ng-model="event.actualDate"
                                                                                        id="actualDate"><span
                                                                class="input-group-addon"><i
                                                                class="glyphicon glyphicon-calendar"></i></span>
                                                        </div>
                                                    </a>
                                                    <ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dLabel"
                                                        ng-disabled="!activeSaveButton">
                                                        <datetimepicker data-ng-model="event.actualDate"
                                                                        data-datetimepicker-config="{ dropdownSelector: '#dropdown3',modelType: 'YYYY-MM-DD HH:mm'}"/>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <script type="text/ng-template" id="addRoute.html">
                                                <div ng-include="'tpl/operation_console/add_route.html'"></div>
                                            </script>
                                            <label class="col-sm-2 control-label">Description</label>

                                            <div class="col-sm-10">
                                                <textarea name="txtDescription" class="form-control" rows="6"
                                                          ng-model="event.description" placeholder=""
                                                          ng-disabled="!activeSaveButton"
                                                          maxlength="65535"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-2"></div>
                                            <div class="col-sm-10">
                                                <a class="btn btn-info" ng-click="addRoute()"
                                                   ng-show="activeSaveButton">Add Route</a>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <label class="col-sm-6 control-label text-left">Event Cost Items</label>
                                            <div class="col-sm-6 text-right">
                                                <a class="btn btn-success" ng-click="addEventCost()"
                                                   ng-show="activeSaveButton">Add</a>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="table-responsive m-xs" style="min-height:120px">
                                                    <table class="table table-striped">
                                                        <thead>
                                                        <tr>
                                                            <th class="hidden">Id</th>
                                                            <th>Charge Code</th>
                                                            <th>Est. Cost</th>
                                                            <th>Act Cost</th>
                                                            <th>Est. Date</th>
                                                            <th>Act Date</th>
                                                            <th style="width: 60px; text-align: center">Action</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr ng-repeat="row in event.eventCosts">
                                                            <td class="hidden">{{row.id}}</td>
                                                            <td>{{row.chargeDesc}}</td>
                                                            <td>{{row.estCurrency}} {{row.estCost | currency:'':2}}</td>
                                                            <td>{{row.actCurrency }} {{row.actCost | currency:'':2}}
                                                            </td>
                                                            <td>{{row.estDate | date:'yyyy-MM-dd' }}</td>
                                                            <td>{{row.actDate | date:'yyyy-MM-dd' }}</td>
                                                            <td style="white-space: nowrap">
                                                                <div class="buttons" ng-show="activeSaveButton">
                                                                    <a class="btn btn-sm btn-info"
                                                                       ng-click="editEventCost($index,row);"><i
                                                                            class="fa fa-edit"></i></a>
                                                                    <a class="btn btn-sm btn-danger"
                                                                       ng-click="removeEventCost($index,row.id)"><i
                                                                            class="fa fa-times"></i></a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="panel panel-default">
                                                    <div class="panel-heading font-bold">Location</div>
                                                    <div class="panel-body">
                                                        <div class="hidden form-group">
                                                            <div class="col-sm-11">
                                                                <input class="form-control" type="text"
                                                                       id="contactLocationID"
                                                                       ng-model="linkedEntity.id" disabled>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label">Search</label>
                                                            <div class="col-sm-9">
                                                                <div class="input-group">
                                                                    <ui-select ng-model="linkedEntity.selected"
                                                                               theme="bootstrap"
                                                                               ng-disabled="!activeSaveButton"
                                                                               ng-change="selectLocationContact(linkedEntity.selected,'event')">
                                                                        <ui-select-match
                                                                                placeholder="Select or search a contact in the list...">
                                                                            {{$select.selected.genericInfo}}
                                                                        </ui-select-match>
                                                                        <ui-select-choices group-by="'customerName'"
                                                                                           repeat="item in clients"
                                                                                           refresh="searchLocationContact($select.search)"
                                                                                           refresh-delay="400">
                                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'event');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label text-right">Contact</label>
                                                            <div class="col-sm-9">
                                                                <div class="input-group">
                                                                    <input class="form-control" type="text" id="contactName"
                                                                           ng-model="linkedEntity.contactName" disabled />
                                                                    <span class="input-group-btn">
                                                                        <button class="btn btn-default" type="button"
                                                                                ng-click="showContact(linkedEntity)"
                                                                                ng-disabled="!activeSaveButton || !linkedEntity || !linkedEntity.contactId">
                                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                                        </button>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label text-right">Name</label>
                                                            <div class="col-sm-9">
                                                                <div class="input-group">
                                                                    <input class="form-control" type="text"
                                                                           id="contactLocationName"
                                                                           ng-model="linkedEntity.customerName"
                                                                           disabled/>
                                                                    <span class="input-group-btn">
                                                                        <button class="btn btn-default" type="button"
                                                                                ng-click="showEntity(linkedEntity)"
                                                                                ng-disabled="!activeSaveButton || !linkedEntity || !linkedEntity.locationId">
                                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                                        </button>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label text-right">Address</label>
                                                            <div class="col-sm-9">
                                                                <input class="form-control" type="text"
                                                                       ng-model="linkedEntity.address1"
                                                                       id="contactAddress"
                                                                       disabled>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                                            <div class="col-sm-9">
                                                                <input class="form-control" type="text"
                                                                       ng-model="linkedEntity.postalCode"
                                                                       disabled>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label text-right">City</label>
                                                            <div class="col-sm-9">
                                                                <input class="form-control" type="text" id="contactCity"
                                                                       ng-model="linkedEntity.city"
                                                                       disabled>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label text-right">Province</label>
                                                            <div class="col-sm-3">
                                                                <input class="form-control" type="text"
                                                                       id="contactProvince"
                                                                       ng-model="linkedEntity.stateProvince"
                                                                       disabled>
                                                            </div>

                                                            <div class="col-sm-1"></div>

                                                            <label class="col-sm-2 control-label text-right">Country</label>
                                                            <div class="col-sm-3">
                                                                <input class="form-control" type="text"
                                                                       id="contactCountry"
                                                                       ng-model="linkedEntity.country"
                                                                       disabled>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label text-right">Phone
                                                                #</label>
                                                            <div class="col-sm-9">
                                                                <input class="form-control" type="text"
                                                                       ng-model="linkedEntity.busPhone1"
                                                                       id="contactPhoneNum"
                                                                       disabled>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                                            <div class="col-sm-9">
                                                            <textarea class="form-control" rows="6"
                                                                      ng-model="linkedEntity.notes"
                                                                      disabled></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-6">
                                                <label class="col-sm-12 control-label text-left"
                                                       ng-show="activeSaveButton">
                                                    <a class="btn btn-default"
                                                       ng-click="duplicateEmail(event.AddressList,event.id,tripid)"
                                                       ng-show="showDuplicateButton">Duplicate Email Address List for
                                                        all</a>
                                                    <!--<input type="checkbox" ng-model="duplicateEmail"  ng-checked="duplicateEmail" />-->
                                                </label>
                                            </div>
                                            <div class="col-sm-6 text-right">
                                                <a class="btn btn-success" ng-click="addAddress()"
                                                   ng-show="activeSaveButton">Add</a>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="table-responsive m-xs" style="min-height:120px">
                                                    <table class="table table-striped">
                                                        <thead>
                                                        <tr>
                                                            <th class="hidden">Id</th>
                                                            <th>Name</th>
                                                            <th>Email</th>
                                                            <th style="width: 60px; text-align: center">Action</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr ng-repeat="row in event.AddressList">
                                                            <td class="hidden">{{row.id}}</td>
                                                            <td>{{ row.name}}</td>
                                                            <td>{{ row.email}}</td>
                                                            <td style="white-space: nowrap">
                                                                <div class="buttons">
                                                                    <a class="btn btn-sm btn-info"
                                                                       ng-click="editAddress($index,row);"
                                                                       ng-show="activeSaveButton"><i
                                                                            class="fa fa-edit"></i></a>
                                                                    <a class="btn btn-sm btn-danger"
                                                                       ng-click="removeAddress($index,row.id)"
                                                                       ng-show="activeSaveButton"><i
                                                                            class="fa fa-times"></i></a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="line b-b line-lg pull-in"></div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Audit Company</label>
                                            <div class="col-sm-4">
                                                <input type="text" name="txtAuditCompany" class="form-control"
                                                       ng-model="event.currentCompany" placeholder="" readonly/>
                                            </div>
                                            <label class="col-sm-2 control-label">Audit User</label>
                                            <div class="col-sm-4">
                                                <input type="text" name="txtAuditUser" class="form-control"
                                                       ng-model="event.updatedBy" placeholder="" readonly/>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Audit Customer</label>
                                            <div class="col-sm-4">
                                                <input type="text" name="txtAuditCustomer" class="form-control"
                                                       ng-model="event.currentCustomer" placeholder="" readonly/>
                                            </div>
                                            <label class="col-sm-2 control-label">Audit Stamp</label>
                                            <div class="col-sm-4">
                                                <input type="text" name="txtAuditStamp" class="form-control"
                                                       ng-model="event.updateTime" placeholder="" readonly/>
                                            </div>
                                        </div>

                                        <div class="line line-dashed b-b line-lg pull-in"></div>
                                        <div class="col-lg-12">
                                            <div class="btn-group  pull-right m-t-xs">
                                                <button class="btn btn-danger " type="button"
                                                        ng-click="cancel()" ng-show="!activeSaveButton">Back
                                                </button>
                                            </div>
                                            <div class="btn-group  pull-right m-t-xs">
                                                <button class="btn btn-danger " type="button"
                                                        ng-click="cancel()" ng-show="activeSaveButton"
                                                        translate="Cancel">Cancel
                                                </button>
                                            </div>
                                            <div class="btn-group  pull-right m-t-xs">
                                                <button class="btn btn-success " type="button"
                                                        ng-click="submitTripEvents(eventForm.$valid,'exit')"
                                                        ng-show="activeSaveButton">
                                                    Save and Exit
                                                </button>
                                            </div>
                                            <div class="btn-group  pull-right m-t-xs">
                                                <button type="submit" class="btn btn-success"
                                                        ng-show="activeSaveButton">Save
                                                </button>
                                            </div>

                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-12" ng-show="!showEditEventButton">
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="!activeSaveButton">Back
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="activeSaveButton"
                                        translate="Cancel">Cancel
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('exit')"
                                        ng-show="activeSaveButton">
                                    Save and Exit
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('keep')"
                                        ng-show="activeSaveButton">
                                    Save
                                </button>
                            </div>
                        </div>
                    </div>
                </tab>
                <tab heading="Costs" class="font-bold" ng-click="showCosts(tripid)">
                    <div class="row" dw-loading="sample-3"
                         dw-loading-options="{active: false,spinner: false}">
                        <div class="col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Costs</div>
                                <div class="row wrapper">
                                    <div class="col-sm-4 m-b-xs">
                                    </div>
                                    <div class="col-sm-4 m-b-xs"></div>
                                    <div class="col-sm-4 m-b-xs">
                                        <div class="btn-group dropdown pull-right m-t-xs">
                                            <button class="btn btn-default" data-toggle="dropdown" translate="Export">
                                                Export
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a ng-click="exportpdf(costList,'costs')">PDF</a></li>
                                                <li><a ng-csv="exportcsv(costList,'costs')" filename="{{csvfilename}}">CSV</a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="btn-group  pull-right m-t-xs">
                                            <span>
                                              <script type="text/ng-template" id="tripCost.html">
                                                <div ng-include="'tpl/operation_console/trip_cost_form.html'"></div>
                                              </script>
                                                <button class="btn btn-success" ng-show="activeSaveButton"
                                                        ng-click="handleCost(tripid, '', 'add')">Add</button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped" st-table="displayCosts" st-safe-src="costList">
                                        <thead>
                                        <tr>
                                            <th class="hidden" st-sort="id">id</th>
                                            <th st-sort="chargeCode">Charge Code</th>
                                            <th st-sort="estCost">Est. Cost</th>
                                            <th st-sort="actCost">Act Cost</th>
                                            <th st-sort="actUsedCost">USD Cost</th>
                                            <th st-sort="actUsedRate">USD Rate</th>
                                            <th st-sort="estDate">Est. Date</th>
                                            <th st-sort="actDate">Act Date</th>
                                            <th st-sort="eventItem">Event</th>
                                            <th st-sort="linkedEntityName">Entity</th>
                                            <th st-sort="linkedContactName">Contact</th>
                                            <th style="width: 60px; text-align: center">Action</th>
                                        </tr>
                                        </thead>
                                        <tbody ng-show="!loadingCosts">
                                        <tr ng-repeat="row in displayCosts">
                                            <td class="hidden">{{row.id}}</td>
                                            <td>{{row.chargeCode}} {{row.chargeDesc}} {{row.description}}</td>
                                            <td>{{row.estCurrency}} {{row.estCost | currency:'':2}}</td>
                                            <td>{{row.actCurrency }} {{row.actCost | currency:'':2}}</td>
                                            <td>{{row.actUsedCost | currency:'':2}}</td>
                                            <td>{{row.actUsedRate | currency:'':2}}</td>
                                            <td>{{row.estDateStr}}</td>
                                            <td>{{row.actDateStr }}</td>
                                            <td>{{row.eventItem }}</td>
                                            <td>{{row.linkedEntityName }}</td>
                                            <td>{{row.linkedContactName }}</td>
                                            <td style="white-space: nowrap">
                                                <div class="buttons">
                                                    <button class="btn btn-sm btn-info" ng-show="activeSaveButton"
                                                            ng-click="handleCost(tripid, row, 'edit')"
                                                            tooltip-placement="bottom"
                                                            tooltip="Edit">
                                                        <i class="fa fa-edit"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-danger" ng-show="activeSaveButton"
                                                            ng-click="removeCost(row)"
                                                            tooltip-placement="bottom"
                                                            tooltip="Delete"><i
                                                            class="fa fa-times"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody ng-show="loadingCosts">
                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <td>
                                                Total USD Cost: {{getTotalUsdCost(costList)}}
                                            </td>

                                            <td>

                                            </td>

                                            <td>
                                                Total Quote: {{getTotalQuoteCost()}}
                                            </td>

                                            <td>

                                            </td>

                                            <td colspan="6">

                                            </td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-12">
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="!activeSaveButton">Back
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="activeSaveButton"
                                        translate="Cancel">Cancel
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('exit')"
                                        ng-show="activeSaveButton">
                                    Save and Exit
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('keep')"
                                        ng-show="activeSaveButton">
                                    Save
                                </button>
                            </div>
                        </div>
                    </div>
                </tab>
                <tab heading="Entities" class="font-bold">
                    <div class="row min-row" >
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Client</div>
                                <div class="panel-body">
                                    <form class="form-horizontal" method="post">
                                        <div class="hidden form-group">
                                            <div class="col-sm-11">
                                                <input class="form-control" type="text" id="clientLocationEntityID"
                                                       ng-model="client.id" disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">

                                                    <ui-select ng-model="client.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(client.selected,'client')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients "
                                                                           refresh="searchLocation($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'client');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           id="clientLocationEntityName"
                                                           ng-model="client.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(client)"
                                                                ng-disabled="!client || !client.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="client.address1" id="clientAddress"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="client.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" id="clientCity"
                                                       ng-model="client.city"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text" id="clientProvince"
                                                       ng-model="client.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text" id="clientCountry"
                                                       ng-model="client.country"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="client.busPhone1" id="clientPhoneNum"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="client.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">
                                    <label translate="Shipper">Shipper</label>
                                    <button class="btn btn-sm btn-info pull-right text-right" ng-disabled="!activeSaveButton || shipper.id == '' || shipper.id == null " ng-click="copyToClient('shipper')"
                                            tooltip-placement="bottom"
                                            tooltip="Copy To Client">
                                        <i class="fa fa-copy"></i>
                                    </button>


                                </div>
                                <div class="panel-body">
                                    <form class="form-horizontal" method="post">
                                        <div class="hidden form-group">
                                            <div class="col-sm-11">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.id" disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">


                                                    <ui-select ng-model="shipper.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(shipper.selected,'shipper')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients "
                                                                           refresh="searchLocation($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'shipper');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           id="shipperLocationEntityName"
                                                           ng-model="shipper.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(shipper)"
                                                                ng-disabled="!shipper || !shipper.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.address1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.city"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.country"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="shipper.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Drop Shipper</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" ng-disabled="!activeSaveButton"
                                                       ng-model="trip.dropShipperName" value="{{trip.dropShipperName}}">
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">

                                    <label translate="Consignee">Consignee</label>
                                    <button class="btn btn-sm btn-info pull-right text-right"
                                            ng-disabled="!activeSaveButton || consignee.id == '' || consignee.id == null "
                                            ng-click="copyToClient('consignee')"
                                            tooltip="Copy To Client">
                                        <i class="fa fa-copy"></i>
                                    </button>
                                </div>
                                <div class="panel-body">
                                    <form class="form-horizontal" role="form">
                                        <div class="hidden form-group">
                                            <div class="col-sm-9">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.id" id="locationEntityID"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <ui-select ng-model="consignee.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(consignee.selected,'consignee')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients"
                                                                           refresh="searchLocation($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'consignee');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text" id="locationEntityName"
                                                           ng-model="consignee.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(consignee)"
                                                                ng-disabled="!consignee || !consignee.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.address1" id="address"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" ng-model="consignee.city"
                                                       id="city"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.stateProvince" id="province"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.country" id="country"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee.busPhone1" id="phoneNum"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="consignee.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Drop Consignee</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="trip.dropCosigneeName" ng-disabled="!activeSaveButton"
                                                       value="{{trip.dropCosigneeName}}">
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Shipper2</div>
                                <div class="panel-body">
                                    <form class="form-horizontal" method="post">
                                        <div class="hidden form-group">
                                            <div class="col-sm-11">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper2.id" disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <ui-select ng-model="shipper2.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(shipper2.selected,'shipper2')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients "
                                                                           refresh="searchLocation($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'shipper2');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           id="shipper2LocationEntityName"
                                                           ng-model="shipper2.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(shipper2)"
                                                                ng-disabled="!shipper2 || !shipper2.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper2.address1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper2.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper2.city"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper2.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper2.country"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">

                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper2.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="shipper2.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>

                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Consignee2</div>
                                <div class="panel-body">
                                    <form class="form-horizontal" role="form">
                                        <div class="hidden form-group">
                                            <div class="col-sm-9">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee2.id"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <ui-select ng-model="consignee2.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(consignee2.selected,'consignee2')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients"
                                                                           refresh="searchLocation($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'consignee2');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           ng-model="consignee2.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(consignee2)"
                                                                ng-disabled="!consignee2 || !consignee2.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee2.address1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee2.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" ng-model="consignee2.city"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee2.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee2.country"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee2.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="consignee2.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Shipper3</div>
                                <div class="panel-body">
                                    <form class="form-horizontal" method="post">
                                        <div class="hidden form-group">
                                            <div class="col-sm-11">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper3.id" disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <ui-select ng-model="shipper3.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(shipper.selected,'shipper3')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients "
                                                                           refresh="searchLocation($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'shipper3');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           ng-model="shipper3.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(shipper3)"
                                                                ng-disabled="!shipper3 || !shipper3.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper3.address1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper3.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper3.city"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper3.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper3.country"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="shipper3.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="shipper3.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Consignee3</div>
                                <div class="panel-body">
                                    <form class="form-horizontal" role="form">
                                        <div class="hidden form-group">
                                            <div class="col-sm-9">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee3.id"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <ui-select ng-model="consignee3.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(consignee3.selected,'consignee3')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients"
                                                                           refresh="searchLocation($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'consignee3');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           ng-model="consignee3.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(consignee3)"
                                                                ng-disabled="!consignee3 || !consignee3.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee3.address1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee3.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" ng-model="consignee3.city"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee3.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee3.country"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="consignee3.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="consignee3.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Broker</div>
                                <div class="panel-body">
                                    <form class="form-horizontal" role="form">
                                        <div class="hidden form-group">
                                            <div class="col-sm-9">
                                                <input class="form-control" type="text"
                                                       ng-model="broker.id"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <ui-select ng-model="broker.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(broker.selected,'broker')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in brokers "
                                                                           refresh="searchBroker($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'broker');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           ng-model="broker.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(broker)"
                                                                ng-disabled="!broker || !broker.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="broker.address1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="broker.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" ng-model="broker.city"

                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="broker.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="broker.country"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="broker.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="broker.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Broker2</div>
                                <div class="panel-body">
                                    <form class="form-horizontal" role="form">
                                        <div class="hidden form-group">
                                            <div class="col-sm-9">
                                                <input class="form-control" type="text"
                                                       ng-model="broker2.id"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <ui-select ng-model="broker2.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(broker2.selected,'broker2')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in brokers "
                                                                           refresh="searchBroker($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'broker2');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           ng-model="broker2.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(broker2)"
                                                                ng-disabled="!broker2 || !broker2.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="broker2.address1"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="broker2.postalCode"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text" ng-model="broker2.city"

                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="broker2.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="broker2.country"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="broker2.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="broker2.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Billed Client</div>
                                <div class="panel-body">
                                    <form class="form-horizontal" method="post">
                                        <div class="hidden form-group">
                                            <div class="col-sm-11">
                                                <input class="form-control" type="text"
                                                       ng-model="billedClient.id" disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <ui-select ng-model="billedClient.selected" theme="bootstrap"
                                                               ng-disabled="!activeSaveButton"
                                                               ng-change="selectLocation(billedClient.selected,'billedClient')">
                                                        <ui-select-match
                                                                placeholder="Select or search a client in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients "
                                                                           refresh="searchLocation($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocation({},'billedClient');"
                                                                 ng-disabled="!activeSaveButton"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-10">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           ng-model="billedClient.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(billedClient)"
                                                                ng-disabled="!billedClient || !billedClient.id">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="billedClient.address1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="billedClient.postalCode"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="billedClient.city"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="billedClient.stateProvince"
                                                       disabled>
                                            </div>
                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="billedClient.country"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-10">
                                                <input class="form-control" type="text"
                                                       ng-model="billedClient.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-10">
                                                <textarea class="form-control" rows="6"
                                                          ng-model="billedClient.notes"
                                                          disabled></textarea>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="!activeSaveButton">Back
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="activeSaveButton"
                                        translate="Cancel">Cancel
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('exit')"
                                        ng-show="activeSaveButton">
                                    Save and Exit
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('keep')"
                                        ng-show="activeSaveButton">
                                    Save
                                </button>
                            </div>

                        </div>
                    </div>

                </tab>
                <tab heading="Comm Center" class="font-bold" active="activityCommCenter"
                     ng-click="showTripEmails(tripid)">
                    <div class="row" dw-loading="sample-5"
                         dw-loading-options="{active: false,spinner: false}">
                        <div class="col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Messages</div>
                                <div class="wrapper">
                                    <div class="row">
                                        <div class="col-sm-3 m-b-xs">
                                            <label for="txtDateFrom" class="col-sm-4 control-label m-t-xs">Date From:</label>
                                            <div class="col-sm-8">
                                                <div class="dropdown" >
                                                    <a class="dropdown-toggle" id="dropdown999" role="button"
                                                       data-toggle="dropdown" data-target="#">
                                                        <div class="input-group"><input type="text" class="form-control"
                                                                                        ng-model="dateFrom"
                                                                                        id="txtDateFrom"><span
                                                                class="input-group-addon"><i
                                                                class="glyphicon glyphicon-calendar"></i></span>
                                                        </div>
                                                    </a>
                                                    <ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dLabel">
                                                        <datetimepicker data-ng-model="dateFrom"
                                                                        data-datetimepicker-config="{ dropdownSelector: '#dropdown999',modelType: 'YYYY-MM-DD HH:mm'}"/>
                                                    </ul>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-sm-2 m-b-xs">
                                            <label for="txtDateTo" class="col-sm-3 control-label m-t-xs">To:</label>
                                            <div class="col-sm-9">
                                                <div class="dropdown" >
                                                    <a class="dropdown-toggle" id="dropdown998" role="button"
                                                       data-toggle="dropdown" data-target="#">
                                                        <div class="input-group"><input type="text" class="form-control"
                                                                                        ng-model="dateTo"
                                                                                        id="txtDateTo"><span
                                                                class="input-group-addon"><i
                                                                class="glyphicon glyphicon-calendar"></i></span>
                                                        </div>
                                                    </a>
                                                    <ul class="dropdown-menu pull-right" role="menu" aria-labelledby="dLabel">
                                                        <datetimepicker data-ng-model="dateTo"
                                                                        data-datetimepicker-config="{ dropdownSelector: '#dropdown998',modelType: 'YYYY-MM-DD HH:mm'}"/>
                                                    </ul>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-sm-2 m-b-xs">
                                            <label class="col-sm-4 control-label m-t-xs">Label:</label>
                                            <div class="col-sm-8">
                                                <select name="txtLabel" id="txtLabel" class="form-control" name="txtLabel"
                                                        ng-options="Option.id as Option.name for Option in searchLabelOptions"
                                                        ng-model="searchLabel" >
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-2 m-b-xs">
                                            <label class="control-label m-t-xs" for="chkIncludeDelete">Include Delete Email</label>
                                            <input type="checkbox"  id="chkIncludeDelete" ng-model="includeDelete" />
                                        </div>

                                        <div class="col-sm-2 m-b-xs">
                                            <div class="col-sm-12">
                                                <div class="input-group">
                                                    <input type="text" class="input form-control" placeholder="search from, to, subject or content"
                                                           ng-model="searchContent">
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button" ng-click="searchEmails(tripid, dateFrom, dateTo, searchContent, searchLabel, includeDelete)">Search</button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-1 m-b-xs">
                                        <div class="btn-group  pull-right m-t-xs">
                                            <span>
                                              <script type="text/ng-template" id="editTripEmail.html">
                                                <div ng-include="'tpl/operation_console/trip_email.html'"></div>
                                              </script>
                                                <button class="btn btn-success" ng-show="activeSaveButton"
                                                        ng-click="sendEmail('','compose')">Compose</button>
                                            </span>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped" st-table="displayedEmails"
                                           st-safe-src="tripEmails">
                                        <thead>
                                        <tr>
                                            <th class="hidden" st-sort="id">id</th>
                                            <th style="width: 20px; text-align: center" st-sort="type">Type</th>
                                            <th style="width: 120px; text-align: center" st-sort="mailFrom">From</th>
                                            <th style="width: 120px; text-align: center" st-sort="mailTo">To</th>
                                            <th style="width: 120px; text-align: center" st-sort="subject">Subject</th>
                                            <th style="width: 180px; text-align: center" st-sort="label">Label</th>
                                            <th style="width: 110px; text-align: center" st-sort="created">Date</th>
                                            <th style="width: 80px; text-align: center" st-sort="numberOfAttachments">Attach</th>
                                            <th style="width: 60px; text-align: center" st-sort="readStatus">Read</th>
                                            <th style="width: 130px; text-align: center">Re-Link</th>
                                            <th style="width: 140px;text-align: center">Action</th>
                                        </tr>
                                        </thead>
                                        <tbody ng-show="!loadingEmails">
                                        <tr ng-repeat="row in displayedEmails">
                                            <td class="hidden">{{row.id}}</td>
                                            <td>{{row.type}}</td>
                                            <td>{{row.mailFrom}}</td>
                                            <td>{{row.mailTo}}</td>
                                            <td>{{row.subject}}</td>
                                            <td>
                                                <select class="form-control" ng-change="markLabel(row.id, row.label)"
                                                        ng-model="row.label" ng-init="(!row.label)? row.label: ''" ng-style="selectStyle(row.label)">
                                                    <option value="{{Option.id}}" ng-repeat="Option in searchLabelOptions" ng-bind="Option.name" ng-style="selectStyle(Option)">
                                                    </option>
                                                </select>
                                            </td>
                                            <td>{{row.created | date:'yyyy-MM-dd HH:mm:ss' }}</td>
                                            <td style="white-space: nowrap">
                                                <script type="text/ng-template" id="copyDocPanel.html">
                                                    <div ng-include="'tpl/operation_console/copy_doc_panel.html'"></div>
                                                </script>
                                                <div class="btn-group" dropdown>
                                                    <button ng-show="row.numberOfAttachments > 0"
                                                            class="btn btn-sm btn-Info dropdown-toggle"
                                                            tooltip-placement="bottom"
                                                            tooltip="Attachment" dropdown-toggle><i
                                                            class="fa fa-paperclip"></i>
                                                    </button>
                                                    <ul class="dropdown-menu pull-right" style="overflow:auto;position:absolute;top:0px;" >
                                                        <li ng-repeat="item in row.attachments">
                                                            <a href="downloaddocument?id={{item.id}}">{{item.originalFileName}}</a>
                                                            <button class="btn btn-xs btn-default">
                                                                <a href="downloaddocument?id={{item.id}}">view</a>
                                                            </button>
                                                            <button class="btn btn-xs btn-success" ng-click="showCopyPanel(item)">
                                                                Copy to Documents
                                                            </button>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </td>
                                            <td style="width: 2px;">
                                                <i ng-if="row.processedStatus =='Deleted'" class="text-danger">Deleted</i>
                                                <i ng-if="row.processedStatus !='Deleted' && row.type=='In' && (row.readStatus==null || row.readStatus=='')"
                                                   class="text-info">New</i>
                                                <i ng-if="row.processedStatus !='Deleted' && row.type=='In' && row.readStatus=='U'" class="text-danger">Unread</i>
                                                <i ng-if="row.processedStatus !='Deleted' && row.type=='In' && row.readStatus=='R'" class="text-success">Read</i>
                                            </td>
                                            <td style="white-space: nowrap">
                                                <div class="input-group" ng-if="row.type=='In'">
                                                    <input type="text" class="form-control" style="width:90px" ng-model="row.refId">
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" style="width:65px; padding-left: 5px" type="button"
                                                                ng-if="row.type=='In'"
                                                                ng-click="updateLink(row.id, row.refId,'relink')">Re-Link</button>
                                                    </span>
                                                </div>
                                            </td>
                                            <td style="white-space: nowrap">
                                                <script type="text/ng-template" id="viewEmail.html">
                                                    <div ng-include="'tpl/operation_console/view_email.html'"></div>
                                                </script>
                                                <div class="buttons">
                                                    <button class="btn btn-sm btn-primary"
                                                            ng-click="sendEmail(row,'edit')"
                                                            ng-show="activeSaveButton && row.processedStatus !='Deleted' && row.type == 'Draft'"
                                                            tooltip-placement="bottom" tooltip="edit"><i
                                                            class="fa fa-edit"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-success"
                                                            ng-click="viewEmail(row.id,'Y')"
                                                            ng-show="row.type != 'Draft'"
                                                            tooltip-placement="bottom"
                                                            tooltip="View"><i class="fa fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-primary"
                                                            ng-click="sendEmail(row,'reply')"
                                                            ng-show="activeSaveButton && row.processedStatus !='Deleted' && row.type != 'Draft'"
                                                            tooltip-placement="bottom" tooltip="reply"><i
                                                            class="fa  fa-mail-reply"></i></button>
                                                    <button class="btn btn-sm btn-primary"
                                                            ng-click="sendEmail(row,'replyAll')"
                                                            ng-show="activeSaveButton && row.processedStatus !='Deleted' && row.type != 'Draft'"
                                                            tooltip="reply all"><i class="fa fa-mail-reply-all"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-info"
                                                            ng-click="markEmail(row.id,'unread')"
                                                            ng-show="activeSaveButton && row.readStatus!='U' && row.processedStatus !='Deleted' && row.type != 'Draft'"
                                                            tooltip-placement="bottom"
                                                            tooltip="Unread"><i class="fa fa-eye-slash"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-danger"
                                                            ng-click="updateLink(row.id,row.cloneTripId,'unlink')"
                                                            ng-show="activeSaveButton && row.type=='In' && row.processedStatus !='Deleted' && row.type != 'Draft'"
                                                            tooltip-placement="bottom"
                                                            tooltip="Unlink"><i class="fa fa-unlink"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-danger"
                                                            ng-show="row.processedStatus != 'Deleted' && activeSaveButton"
                                                            ng-click="activeSaveButton && removeEmail(row.id)"
                                                            tooltip-placement="bottom"
                                                            tooltip="Delete">
                                                        <i class="fa fa-times"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-primary"
                                                            ng-show="activeSaveButton && row.processedStatus == 'Deleted'"
                                                            ng-click="undeleteEmail(row.id)"
                                                            tooltip-placement="bottom" tooltip="Undelete"><i
                                                            class="fa fa-mail-reply"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody ng-show="loadingEmails">
                                        <tr>
                                            <td colspan="10" class="text-center"><i
                                                    class="fa fa-spin fa-refresh"></i></td>
                                        </tr>
                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <td colspan="2" class="text-left">
                                                <div>
                                                    <small class="text-muted inline m-t-sm m-b-sm">Total item(s):
                                                        {{tripEmails.length}}
                                                    </small>
                                                </div>
                                            </td>
                                            <td colspan="5" class="text-center">

                                            </td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>


                        <div class="col-lg-12">

                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="!activeSaveButton">Back
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="activeSaveButton"
                                        translate="Cancel">Cancel
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('exit')"
                                        ng-show="activeSaveButton">
                                    Save and Exit
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('keep')"
                                        ng-show="activeSaveButton">
                                    Save
                                </button>
                            </div>

                        </div>
                    </div>
                </tab>
                <tab heading="Generated Documents" class="font-bold" active="activityDoc" ng-click="showDocs(tripid)">
                    <div class="row" dw-loading="sample-6"
                         dw-loading-options="{active: false,spinner: false}">
                        <div class="col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold" translate="Generated Documents">Generated
                                    Documents
                                </div>
                                <div class="row wrapper">
                                    <div class="col-sm-4 m-b-xs">
                                        <div class="btn-group pull-left m-t-xs">
                                            <button class="btn btn-success" type="button" ng-click="btnQuotePDF(tripid)"
                                                    translate="QUOTE">
                                                QUOTE
                                            </button>
                                            <button class="btn btn-success" type="button"
                                                    ng-click="showPickup(tripid, 'edit','pickup')"
                                            >
                                                Pu/Del
                                            </button>
                                            <button class="btn btn-success" type="button"
                                                    ng-click="showBOL(tripid, 'edit','bol')"
                                                    translate="BOL">
                                                BOL
                                            </button>
                                            <button class="btn btn-success" type="button"
                                                    ng-click="printTripPDF(tripid)"
                                                    translate="Print Trip PDF">
                                                Print Trip PDF
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 m-b-xs"></div>
                                    <div class="col-sm-4 m-b-xs">
                                        <div class="btn-group dropdown pull-right m-t-xs">
                                            <button class="btn btn-default" data-toggle="dropdown" translate="Export">
                                                Export
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a ng-click="exportpdf(doclist,'docs')">PDF</a></li>
                                                <li><a ng-csv="exportcsv(doclist,'docs')"
                                                       filename="{{csvfilename}}">CSV</a></li>
                                            </ul>
                                        </div>
                                        <div class="btn-group  pull-right m-t-xs">
                                            <span>
                                              <script type="text/ng-template" id="uploaddoc.html">
                                                <div ng-include="'tpl/operation_console/trip_upload_form.html'"></div>
                                              </script>
                                                <button class="btn btn-success"
                                                        ng-click="uploadDocs(tripid)"
                                                        ng-show="activeSaveButton">Upload</button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped" st-table="displayedDocs" st-safe-src="doclist">
                                        <thead>
                                        <tr>
                                            <th class="hidden" st-sort="id">id</th>
                                            <th st-sort="fileType">File Type</th>
                                            <th st-sort="originalFileName">File Name</th>
                                            <th st-sort="filesize">File Size</th>
                                            <th st-sort="updateTime">Created Date</th>
                                            <th st-sort="updatedBy">Created By</th>
                                            <th style="width: 60px; text-align: center">Action</th>
                                        </tr>
                                        </thead>
                                        <tbody ng-show="!loadingdocs">
                                        <tr ng-repeat="row in displayedDocs">
                                            <td class="hidden">{{row.id}}</td>
                                            <td>{{row.fileType}}</td>
                                            <td>{{row.originalFileName}}</td>
                                            <td>{{row.filesize }} KB</td>
                                            <td>{{row.updateTime | date:'yyyy-MM-dd' }}</td>
                                            <td>{{row.updatedBy}}</td>
                                            <td style="white-space: nowrap">


                                                <div class="buttons">
                                                    <button class="btn btn-sm btn-info" ng-click="downloadFile(row.id)"
                                                            tooltip-placement="bottom"
                                                            tooltip="Download">
                                                        <i class="fa fa-download"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-danger"
                                                            ng-click="deleteDocument(row.id, row.fileType)"
                                                            ng-show="activeSaveButton"
                                                            tooltip-placement="bottom"
                                                            tooltip="Delete document">
                                                        <i class="fa fa-times"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody ng-show="loadingdocs">
                                        <tr>
                                            <td colspan="6" class="text-center"><i
                                                    class="fa fa-spin fa-refresh"></i></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>


                        <div class="col-lg-12">

                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="!activeSaveButton">Back
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="activeSaveButton"
                                        translate="Cancel">Cancel
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('exit')"
                                        ng-show="activeSaveButton">
                                    Save and Exit
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('keep')"
                                        ng-show="activeSaveButton">
                                    Save
                                </button>
                            </div>

                        </div>

                    </div>

                </tab>
                <tab heading="Notes" active="activityNote" class="font-bold" ng-click="showNotes(tripid)">
                    <div class="row" dw-loading="sample-7"
                         dw-loading-options="{active: false,spinner: false}">
                        <div class="col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Notes</div>
                                <div class="row wrapper">
                                    <div class="col-sm-4 m-b-xs">
                                    </div>
                                    <div class="col-sm-4 m-b-xs"></div>
                                    <div class="col-sm-4 m-b-xs">
                                        <div class="btn-group dropdown pull-right m-t-xs">
                                            <button class="btn btn-default" data-toggle="dropdown" translate="Export">
                                                Export
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a ng-click="exportpdf(noteList,'notes')">PDF</a></li>
                                                <li><a ng-csv="exportcsv(noteList,'notes')" filename="{{csvfilename}}">CSV</a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="btn-group  pull-right m-t-xs">
                                            <span>
                                              <script type="text/ng-template" id="noteContent.html">
                                                <div ng-include="'tpl/operation_console/add_note_form.html'"></div>
                                              </script>
                                                <button class="btn btn-success" ng-show="activeSaveButton"
                                                        ng-click="handleNote(tripid, '', 'add')">Add</button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped" st-table="displayedNotes" st-safe-src="noteList">
                                        <thead>
                                        <tr>
                                            <th class="hidden" st-sort="id">id</th>
                                            <th st-sort="noteDate">Date</th>
                                            <th st-sort="noteDesc">Note</th>
                                            <th st-sort="noteUser">User Name</th>
                                            <th style="width: 60px; text-align: center">Action</th>
                                        </tr>
                                        </thead>
                                        <tbody ng-show="!loadingNotes">
                                        <tr ng-repeat="row in displayedNotes">
                                            <td class="hidden" style="width:10%">{{row.id}}</td>
                                            <td style="width:20%">{{row.createTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
                                            <td style="width:50%">{{row.content}}</td>
                                            <td style="width:20%">{{row.createdBy }}</td>
                                            <td style="white-space: nowrap">
                                                <div class="buttons">
                                                    <button ng-show='{{row.canEdit}} && activeSaveButton' class="btn btn-sm btn-info" ng-click="handleNote(tripid, row, 'edit')" tooltip="Edit"><i class="fa fa-edit"></i></button>
                                                    <button ng-show='{{row.canEdit}} && activeSaveButton' class="btn btn-sm btn-danger" ng-confirm-click="Are you sure you want to delete this record?"
                                                            confirmed-click="removeNote(tripid, row.id)" tooltip="Delete"><i class="fa fa-times"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody ng-show="loadingNotes">
                                        <tr>
                                            <td colspan="6" class="text-center"><i
                                                    class="fa fa-spin fa-refresh"></i></td>
                                        </tr>
                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <td colspan="2" class="text-left">
                                                <div>
                                                    <small class="text-muted inline m-t-sm m-b-sm">Total item(s):
                                                        {{noteslength}}
                                                    </small>
                                                </div>
                                            </td>
                                            <td colspan="5" class="text-center">

                                            </td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>


                        <div class="col-lg-12">

                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="!activeSaveButton">Back
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="activeSaveButton"
                                        translate="Cancel">Cancel
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('exit')"
                                        ng-show="activeSaveButton">
                                    Save and Exit
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('keep')"
                                        ng-show="activeSaveButton">
                                    Save
                                </button>
                            </div>

                        </div>
                    </div>
                </tab>
                <tab heading="Invoices" class="font-bold" active="activityInvoice" ng-click="showInvoices(tripid)">
                    <div class="row" dw-loading="sample-8"
                         dw-loading-options="{active: false,spinner: false}">
                        <div class="col-lg-12">
                            <div class="panel panel-default">
                                <div class="panel-heading font-bold">Invoices</div>
                                <div class="row wrapper">
                                    <div class="col-sm-4 m-b-xs">
                                    </div>
                                    <div class="col-sm-4 m-b-xs"></div>
                                    <div class="col-sm-4 m-b-xs">
                                        <div class="btn-group dropdown pull-right m-t-xs">
                                            <button class="btn btn-default" data-toggle="dropdown" translate="Export">
                                                Export
                                                <span class="caret"></span>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a ng-click="exportpdf(invoiceList,'invoice')">PDF</a></li>
                                                <li><a ng-csv="exportcsv(invoiceList,'invoice')"
                                                       filename="{{csvfilename}}">CSV</a></li>
                                            </ul>
                                        </div>
                                        <div class="btn-group  pull-right m-t-xs">
                                            <span>
                                                <button class="btn btn-success" ng-show="activeSaveButton"
                                                        ng-click="showInvoice(tripid,'','new','invoice')">Add Invoice</button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped" st-table="displayedInvoices"
                                           st-safe-src="invoiceList">
                                        <thead>
                                        <tr>
                                            <th st-sort="id" class="hidden">ID</th>
                                            <th st-sort="refNum">Invoice #</th>
                                            <th st-sort="serviceType">Service Type</th>
                                            <th st-sort="invoiceTo">Invoice To</th>
                                            <th st-sort="shipper">Shipper</th>
                                            <th st-sort="billingCurrency">Currency</th>
                                            <th st-sort="totalAmount">Total</th>
                                            <th st-sort="invoiceDate">Date</th>
                                            <th style="width: 60px; text-align: center">Action</th>
                                        </tr>
                                        </thead>
                                        <tbody ng-show="!loadingInvoice">
                                        <tr ng-repeat="row in displayedInvoices">
                                            <td class="hidden"><a class="text-u-l">{{row.id}}</a></td>
                                            <td>{{ row.refNum}}</td>
                                            <td>{{ row.serviceType}}</td>
                                            <td>{{ row.billedClient }}</td>
                                            <td>{{ row.shipper }}</td>
                                            <td>{{ row.billingCurrency}}</td>
                                            <td>{{ row.totalAmount| currency:'':2}}</td>
                                            <td>{{ row.invoiceDate| date:'yyyy-MM-dd'}}</td>
                                            <td style="white-space: nowrap">
                                                <div class="buttons">
                                                    <button class="btn btn-sm btn-info" ng-show="row.documentId>0"
                                                            ng-click="downloadFile(row.documentId)"
                                                            tooltip-placement="bottom"
                                                            tooltip="Download">
                                                        <i class="fa fa-download"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-danger"
                                                            ng-click="removeInvoice(row.id)"
                                                            tooltip-placement="bottom" ng-show="activeSaveButton"
                                                            tooltip="Delete"><i
                                                            class="fa fa-times"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody ng-show="loadingInvoice">
                                        <tr>
                                            <td colspan="8" class="text-center"><i class="fa fa-spin fa-refresh"></i>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <td colspan="2" class="text-left">
                                                <div>
                                                    <small class="text-muted inline m-t-sm m-b-sm">Total item(s):
                                                        {{invoicelength}}
                                                    </small>
                                                </div>
                                            </td>
                                            <td colspan="5" class="text-center">

                                            </td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-12">

                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="!activeSaveButton">Back
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-danger " type="button"
                                        ng-click="cancel()" ng-show="activeSaveButton"
                                        translate="Cancel">Cancel
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('exit')"
                                        ng-show="activeSaveButton">
                                    Save and Exit
                                </button>
                            </div>
                            <div class="btn-group  pull-right m-t-xs">
                                <button class="btn btn-success " type="button" ng-click="saveTrip('keep')"
                                        ng-show="activeSaveButton">
                                    Save
                                </button>
                            </div>

                        </div>
                    </div>

                </tab>
            </tabset>
        </div>
    </div>

    <div class="modal fade" id="treeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog ">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span
                            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title">Import Event Template</h4>
                </div>
                <div class="modal-body">
                    <div id="originalTreeBox">
                        <ul id="originalTree" class="ztree" style="overflow:auto;height:450px;"></ul>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" ng-click="resetTripEventTree()">Import</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="addressModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog ">
            <div class="modal-content">
                <form class="form-horizontal" name="addressForm" id="addressForm" method="POST"
                      ng-submit="submitAddress(addressForm.$valid)">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                                class="sr-only">Close</span></button>
                        <h4 class="modal-title">{{isNewAddress ? "Add Email" : "Edit Email"}}</h4>
                    </div>
                    <div class="modal-body">
                        <ul class="nav nav-tabs" role="tablist" ng-show="isNewAddress" id="tablist">
                            <li role="presentation" class="active"><a aria-controls="addAddress" role="tab"
                                                                      data-toggle="tab">Add</a></li>
                            <li role="presentation"><a aria-controls="importAddress" role="tab" data-toggle="tab">Import
                                list</a></li>
                        </ul>
                        <div class="tab-content">
                            <div role="tabpanel" class="subtab tab-pane active" id="addAddress">
                                <div class="form-group">
                                    <label class="col-sm-2 control-label text-right">Search</label>
                                    <div class="col-sm-9">
                                        <ui-select ng-model="addressEntity.Contact" theme="bootstrap"
                                                   ng-change="addressContact()">
                                            <ui-select-match placeholder="Select or search a contact in the list...">
                                            </ui-select-match>
                                            <ui-select-choices group-by="'customerName'"
                                                               repeat="item in contacts | filter: $select.search"
                                                               refresh="searchContact($select.search)"
                                                               refresh-delay="400">
                                                <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label text-right">Name</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="text" ng-model="addressEntity.name"
                                               maxlength="100" id="txtAddressName"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label text-right">Email</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="text" ng-model="addressEntity.email"
                                               maxlength="255" id="txtAddressEmail"/>
                                    </div>
                                </div>
                            </div>
                            <div role="tabpanel" class="subtab tab-pane" id="importAddress" ng-show="isNewAddress">
                                <div class="form-group">
                                    <div class="col-sm-12">
                                        <textarea class="form-control" ng-model="addressEntity.mailMsg" rows="6"
                                                  id="txtAddressMsg"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-success">Save</button>
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal" id="costModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width:850px;">
            <div class="modal-content">
                <form class="form-horizontal" name="costForm" id="costForm" method="POST"
                      ng-submit="submitEventCost(costForm.$valid)">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                                class="sr-only">Close</span></button>
                        <h4 class="modal-title">Capture Cost Editor</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="col-sm-2 control-label text-right">Charge Code</label>
                            <div class="col-sm-4">
                                <div class="input-group-btn dropdown" dropdown>
                                    <select class="form-control" name="chargeType2" id="chargeType2"
                                            ng-options="Option.name for Option in chargeCodeOption track by Option.id"
                                            ng-model="costEntity.charge" >
                                    </select>
                                </div>
                            </div>

                            <label class="col-sm-2 control-label">Visible</label>
                            <div class="col-sm-4">
                                <select class="form-control" name="ddlVisible"
                                        ng-options="option.id as option.name for option in visibleOption"
                                        ng-model="costEntity.visible"></select>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label text-right">Est. Cost</label>
                            <div class="col-sm-2">
                                <input type="number" class="form-control" ng-model="costEntity.estCost" step="0.01" max="99999999" min="0"/>
                            </div>
                            <div class="col-sm-2">
                                <div class="input-group-btn dropdown" dropdown>
                                    <select class="form-control"
                                            ng-options="Option.id as Option.name for Option in currencyOption"
                                            ng-model="costEntity.estCurrency">
                                    </select>
                                </div>
                            </div>
                            <label class="col-sm-2 control-label">Est. Date</label>
                            <div class="col-sm-4">
                                <div class="input-group" ng-controller="DatepickerDemoCtrl">
                                    <input type="text" class="form-control"
                                           datepicker-popup="yyyy-MM-dd"
                                           ng-model="costEntity.estDate" id="estDate"
                                           is-open="opened" datepicker-options="dateOptions"
                                           ng-required="false" close-text="Close"/>
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default"
                                                ng-click="open($event)">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label text-right">Actual Cost</label>
                            <div class="col-sm-2">
                                <input type="number" class="form-control" ng-model="costEntity.actCost"
                                       ng-blur="getUSDRate(costEntity.actCurrency)" step="0.01" max="99999999" min="0"/>
                            </div>
                            <div class="col-sm-2">
                                <div class="input-group-btn dropdown" dropdown>
                                    <select class="form-control"
                                            ng-change="getUSDRate(costEntity.actCurrency)"
                                            ng-options="Option.id as Option.name for Option in currencyOption"
                                            ng-model="costEntity.actCurrency">
                                    </select>
                                </div>
                            </div>
                            <label class="col-sm-2 control-label">Actual Date</label>
                            <div class="col-sm-4">
                                <div class="input-group" ng-controller="DatepickerDemoCtrl">
                                    <input type="text" class="form-control"
                                           datepicker-popup="yyyy-MM-dd"
                                           ng-model="costEntity.actDate" id="actDate"
                                           is-open="opened" datepicker-options="dateOptions"
                                           ng-required="false" close-text="Close"/>
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default"
                                                ng-click="open($event)">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
								    </span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label text-right">USD Rate</label>
                            <div class="col-sm-4">
                                <p class="form-control-static">{{costEntity.actUsedRate}}</p>
                            </div>
                            <label class="col-sm-2 control-label">USD Cost</label>
                            <div class="col-sm-4">
                                <p class="form-control-static">{{costEntity.actUsedCost | currency:'':2}}</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading font-bold">Location</div>
                                    <div class="panel-body">

                                        <div class="hidden form-group">
                                            <div class="col-sm-11">
                                                <input class="form-control" type="text"
                                                       ng-model="costEntity.costLocation.id" disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label">Search</label>
                                            <div class="col-sm-9">
                                                <div class="input-group">
                                                    <ui-select ng-model="costEntity.costLocation.selected"
                                                               theme="bootstrap"
                                                               ng-change="selectLocationContact(costEntity.costLocation.selected,'cost')">
                                                        <ui-select-match
                                                                placeholder="Select or search a contact in the list...">
                                                            {{$select.selected.genericInfo}}
                                                        </ui-select-match>
                                                        <ui-select-choices group-by="'customerName'"
                                                                           repeat="item in clients"
                                                                           refresh="searchLocationContact($select.search)"
                                                                           refresh-delay="400">
                                                            <span ng-bind-html="item.genericInfo | highlight: $select.search"></span>
                                                        </ui-select-choices>
                                                    </ui-select>
                                                    <span class="input-group-btn">
                                                              <a ng-click="selectLocationContact({},'cost');"
                                                                 class="btn btn-default">
                                                                <span class="fa fa-close"></span>
                                                              </a>
                                                            </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Contact</label>
                                            <div class="col-sm-9">
                                                <div class="input-group">
                                                    <input class="form-control" type="text" id="contactContactName"
                                                           ng-model="costEntity.costLocation.contactName" disabled />
                                                    <span class="input-group-btn">
                                                            <button class="btn btn-default" type="button"
                                                                    ng-click="showContact(costEntity.costLocation)"
                                                                    ng-disabled="!costEntity.costLocation || !costEntity.costLocation.contactId">
                                                                <span class="glyphicon glyphicon-eye-open"></span>
                                                            </button>
                                                        </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Name</label>
                                            <div class="col-sm-9">
                                                <div class="input-group">
                                                    <input class="form-control" type="text"
                                                           ng-model="costEntity.costLocation.customerName" disabled/>
                                                    <span class="input-group-btn">
                                                        <button class="btn btn-default" type="button"
                                                                ng-click="showEntity(costEntity.costLocation)"
                                                                ng-disabled="!costEntity.costLocation || !costEntity.costLocation.locationId">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Address</label>
                                            <div class="col-sm-9">
                                                <input class="form-control" type="text"
                                                       ng-model="costEntity.costLocation.address1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Postal</label>
                                            <div class="col-sm-3">
                                                <input class="form-control" type="text"
                                                       ng-model="costEntity.costLocation.postalCode"
                                                       disabled>
                                            </div>

                                            <label class="col-sm-2 control-label text-right">City</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="costEntity.costLocation.city"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Province</label>
                                            <div class="col-sm-3">
                                                <input class="form-control" type="text"
                                                       ng-model="costEntity.costLocation.stateProvince"
                                                       disabled>
                                            </div>

                                            <label class="col-sm-2 control-label text-right">Country</label>
                                            <div class="col-sm-4">
                                                <input class="form-control" type="text"
                                                       ng-model="costEntity.costLocation.country"
                                                       disabled>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Phone #</label>
                                            <div class="col-sm-9">
                                                <input class="form-control" type="text"
                                                       ng-model="costEntity.costLocation.busPhone1"
                                                       disabled>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-2 control-label text-right">Notes</label>
                                            <div class="col-sm-9">
                                                            <textarea class="form-control" rows="4"
                                                                      ng-model="costEntity.costLocation.notes"
                                                                      disabled></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-2 control-label">Description</label>
                            <div class="col-sm-10">
                                <textarea class="form-control" rows="4"
                                          ng-model="costEntity.description" maxlength="500"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-success">Save</button>
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="modal" id="subjectModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog ">
            <div class="modal-content">
                <form class="form-horizontal" name="subjectForm" id="subjectForm" method="POST"
                      ng-submit="submitEventSubject(subjectForm.$valid)">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                                class="sr-only">Close</span></button>
                        <h4 class="modal-title">Enter Event Subject</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="col-sm-3 control-label">Event Subject</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" ng-model="trip.subject">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-success">Save</button>
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>